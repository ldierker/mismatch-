<!DOCTYPE html>
<html>

<head>
    <script src="http://code.jquery.com/jquery-3.1.1.js" integrity="sha256-16cdPddA6VdVInumRGo6IbivbERE8p7CQR3HzTBuELA=" crossorigin="anonymous"></script>
    <title>
        ColorTag API Testing
    </title>
</head>

<body>
    Making an ajax call to the colortag api with this image
    <img src="sweater.jpeg" alt="colortest" height="400" width="400">
    <button type="button" onclick="runtest()">Run Test</button>
    <div id="output">
    </div>
</body>
<script>
    function runtest() {
        /*
        var xhttp = new XMLHttpRequest();
        xhttp.onreadystatechange = function() {
            if (this.readyState == 4 && this.status == 200) {
                console.log(this.responseText);
                document.getElementById("output").innerHTML = this.responseText;
            } else {
                console.log(this);
            }

        };
        xhttp.open("POST", "https://apicloud-colortag.p.mashape.com/tag-file.json", true);
        xhttp.setRequestHeader('X-Mashape-Key', '0oXi6uvKF4mshYOnD1PRAiv18GEEp1dycKgjsnv3XLvqGL8xea');
        xhttp.send('image=@sweater.jpeg&palette=simple&sort=relevance');
        */
        /*
                    $.ajax({
                            url: "https://apicloud-colortag.p.mashape.com/tag-file.json",
                            type: "POST",
                            beforeSend: function (request)
                                {
                                    request.setRequestHeader('X-Mashape-Key','0oXi6uvKF4mshYOnD1PRAiv18GEEp1dycKgjsnv3XLvqGL8xea');
                                },
                            data: 'image=@sweater.jpeg&palette=simple&sort=relevance'
                            }).done(function (data) {console.log(data)});
                            */
        $.ajax({
            url: "https://apicloud-colortag.p.mashape.com/tag-file.json",
            beforeSend: function(xhr) {
                xhr.setRequestHeader("X-Mashape-Key", "0oXi6uvKF4mshYOnD1PRAiv18GEEp1dycKgjsnv3XLvqGL8xea");
            },
            type: 'POST',
            dataType: 'json',
            contentType: 'application/json',
            processData: false,
            data: '{"image":"@sweater.jpeg", "palette":"simple","sort":"relance"}',
            success: function(data) {
                alert(JSON.stringify(data));
            },
            error: function() {
                alert("Cannot get data");
            }
        });
    }
</script>

</html>
